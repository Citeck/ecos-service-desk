---
id: log-work-action
name:
  ru: Записать работу
  en: Log work
type: mutate
confirm:
  title:
    ru: Записать работу
    en: Log work
  formRef: uiserv/form@ecos-time-tracking-sd-form
  formAttributes:
    _parent: ${?id}
  attributesMapping:
    record.attributes.duration: duration
    record.attributes.startDate: startDate
    record.attributes.timeLeft: timeLeft
    record.attributes.timeSpent: timeSpent
    record.attributes.user: user
    record.attributes.workDescription: workDescription
    record.attributes.documentStatus: documentStatus
    record.attributes.sd-support-line:line: sd-support-line:line
config:
  record:
    id: emodel/ecos-time-tracking-type@
    attributes:
      _parent: ${?id}
      _parentAtt: time-trackable:timeTracking
predicate:
  t: or
  val:
    - t: eq
      att: _roles.isCurrentUserMemberOf.impl-first-line-role?bool
      val: true
    - t: eq
      att: _roles.isCurrentUserMemberOf.impl-second-line-role?bool
      val: true
    - t: eq
      att: _roles.isCurrentUserMemberOf.impl-third-line-role?bool
      val: true
    - t: eq
      att: _roles.isCurrentUserMemberOf.lead-tech-role?bool
      val: true
    - t: eq
      att: _roles.isCurrentUserMemberOf.add-partic-role?bool
      val: true
    - t: eq
      att: _roles.isCurrentUserMemberOf.tech-role?bool
      val: true


